<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Editor HTML com Preview ao Vivo</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="m-0 p-5 h-screen box-border flex gap-5 bg-gray-200 font-sans">

  <textarea
    id="editor"
    spellcheck="false"
    class="w-1/2 h-full p-4 text-sm font-mono bg-gray-900 text-gray-200 rounded-xl shadow-lg resize-none focus:outline-none"
  >
<!DOCTYPE html>
<html>
<head>
  <title>Preview</title>
</head>
<body class="p-4">
  <h1 class="text-3xl font-bold text-blue-600">Olá, mundo!</h1>
  <p class="mt-2 text-gray-700">Agora o Tailwind funciona no preview!</p>
  
  <button class="mt-4 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-700 transition">
    Botão com Estilo
  </button>
</body>
</html>
  </textarea>

  <iframe
    id="preview"
    class="w-1/2 h-full bg-white rounded-xl shadow-lg border-0"
  ></iframe>

  <script>
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');

    function updatePreview() {
  const editorContent = editor.value;

  // 1. Crie a tag de script como uma variável separada
  const tailwindScript = '<script src="https://cdn.tailwindcss.com"><\/script>';
  
  // 2. Use a variável na função replace()
  const finalContent = editorContent.replace('</head>', tailwindScript + '</head>');
  
  preview.srcdoc = finalContent;
}

    editor.addEventListener('input', updatePreview);
    window.addEventListener('load', updatePreview);

    editor.addEventListener('keydown', function(e) {
      if (e.key === 'Tab') {
        e.preventDefault();
        const start = this.selectionStart;
        const end = this.selectionEnd;

        const tab = "  ";
        this.value = this.value.substring(0, start) + tab + this.value.substring(end);
        this.selectionStart = this.selectionEnd = start + tab.length;

        updatePreview();
      }
    });
  </script>

</body>
</html>